---
import { ArrowUpRight } from "lucide-react";
import { Logo } from "@/components/logo";
import { Button } from "@/components/ui/button";
import {
	Card,
	CardContent,
	CardDescription,
	CardFooter,
	CardHeader,
	CardTitle,
} from "@/components/ui/card";
import { formatDate } from "@/lib/helpers";
import { getAllBlogsQuery, runQuery } from "@/sanity/queries";
import Layout from "../layouts/Layout.astro";

const articles = await runQuery(getAllBlogsQuery);
---

<Layout title="Blog">
    <div class="flex flex-col">
			<section class="py-16 sm:py-20 lg:py-24 min-h-screen grid place-items-center">
				<div class="w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
					<div class="flex flex-col items-center text-center gap-6 sm:gap-8">
                        <h2 class="text-4xl sm:text-5xl lg:text-7xl xl:text-8xl font-semibold leading-none tracking-tight max-w-5xl">
                            Articles, insights, and updates
                            <br />
                            <span class="block">
                                from <Logo hideMark={false} />
                            </span>
                        </h2>
                        <p class="max-w-3xl text-lg sm:text-xl lg:text-2xl leading-relaxed font-light mt-4">
                            Technical deep dives, tutorials, and product news from the efobi.dev team.
                        </p>
					</div>
				</div>
			</section>
            <section class="bg-background text-foreground py-16 sm:py-20 lg:py-24">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col gap-16 lg:gap-24">
      {articles.map((article, index) => (
        <article 
          class={`group grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center ${
            index % 2 === 0 ? '' : 'lg:grid-flow-dense'
          }`}
        >
          <div 
            class={`relative overflow-hidden rounded-2xl lg:rounded-3xl bg-muted shadow-lg transition-all duration-500 group-hover:shadow-2xl ${
              index % 2 === 0 ? '' : 'lg:col-start-2'
            }`}
          >
            <div class="aspect-[3/2]">
              <img 
                src={article.mainImage} 
                class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-105" 
                alt={article.title} 
                loading="lazy" 
                decoding="async" 
              />
            </div>
          </div>
          <div 
            class={`flex flex-col justify-center space-y-6 ${
              index % 2 === 0 ? '' : 'lg:col-start-1 lg:row-start-1'
            }`}
          >
            <time 
              datetime={article.publishedDate}
              class="text-sm font-medium tracking-wide text-muted-foreground uppercase"
            >
              {formatDate(article.publishedDate)}
            </time>
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight leading-tight">
              {article.title}
            </h2>
            <p class="text-lg sm:text-xl leading-relaxed text-muted-foreground/90">
              {article.excerpt}
            </p>
            <div class="pt-2">
              <a 
                href={`/blog/${article.slug}`}
                class="group/link inline-flex items-center gap-2 text-lg font-semibold tracking-tight transition-all hover:gap-4"
              >
                <span>Read Article</span>
                <ArrowUpRight className="size-5 transition-transform group-hover/link:translate-x-1 group-hover/link:-translate-y-1" />
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>
            </div>
            
</Layout>